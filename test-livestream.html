<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Livestream - dv6666.net Style</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: white;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    .header h1 {
      color: #3b82f6;
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
    }
    
    .header p {
      color: #94a3b8;
      font-size: 1.1rem;
    }
    
    .livestream-container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .video-section {
      background: #1e293b;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    
    .video-title {
      color: #f1f5f9;
      font-size: 1.3rem;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .live-indicator {
      width: 12px;
      height: 12px;
      background: #ef4444;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }
    
    .video-wrapper {
      position: relative;
      width: 100%;
      height: 400px;
      border-radius: 8px;
      overflow: hidden;
      background: #000;
    }
    
    .video-wrapper iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    
    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .betting-panel {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    
    .betting-title {
      color: #f1f5f9;
      font-size: 1.2rem;
      margin-bottom: 15px;
      text-align: center;
    }
    
    .bet-options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .bet-option {
      background: #334155;
      border: 2px solid transparent;
      border-radius: 8px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }
    
    .bet-option:hover {
      border-color: #3b82f6;
      background: #475569;
      transform: translateY(-2px);
    }
    
    .bet-option.selected {
      border-color: #10b981;
      background: #064e3b;
    }
    
    .bet-team {
      color: #f1f5f9;
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .bet-odds {
      color: #10b981;
      font-size: 1.1rem;
      font-weight: bold;
    }
    
    .bet-amount {
      margin-top: 15px;
    }
    
    .bet-amount input {
      width: 100%;
      padding: 10px;
      border: 1px solid #475569;
      border-radius: 6px;
      background: #1e293b;
      color: #f1f5f9;
      font-size: 1rem;
    }
    
    .bet-amount input:focus {
      outline: none;
      border-color: #3b82f6;
    }
    
    .quick-amounts {
      display: flex;
      gap: 5px;
      margin-top: 10px;
    }
    
    .quick-amount {
      flex: 1;
      padding: 8px;
      background: #475569;
      border: none;
      border-radius: 4px;
      color: #f1f5f9;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    
    .quick-amount:hover {
      background: #64748b;
    }
    
    .place-bet-btn {
      width: 100%;
      padding: 12px;
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 1.1rem;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 15px;
    }
    
    .place-bet-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
    }
    
    .place-bet-btn:disabled {
      background: #64748b;
      cursor: not-allowed;
      transform: none;
    }
    
    .chat-section {
      background: #1e293b;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      height: 300px;
      display: flex;
      flex-direction: column;
    }
    
    .chat-title {
      color: #f1f5f9;
      font-size: 1.2rem;
      margin-bottom: 15px;
    }
    
    .chat-messages {
      flex: 1;
      overflow-y: auto;
      background: #0f172a;
      border-radius: 6px;
      padding: 10px;
      margin-bottom: 10px;
    }
    
    .chat-message {
      margin-bottom: 8px;
      padding: 5px;
      border-radius: 4px;
    }
    
    .chat-message.user {
      background: #1e40af;
    }
    
    .chat-message.system {
      background: #374151;
      color: #9ca3af;
    }
    
    .chat-input {
      display: flex;
      gap: 10px;
    }
    
    .chat-input input {
      flex: 1;
      padding: 8px;
      border: 1px solid #475569;
      border-radius: 6px;
      background: #1e293b;
      color: #f1f5f9;
    }
    
    .chat-input button {
      padding: 8px 15px;
      background: #3b82f6;
      border: none;
      border-radius: 6px;
      color: white;
      cursor: pointer;
    }
    
    .stats-section {
      background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    
    .stats-title {
      color: #f1f5f9;
      font-size: 1.2rem;
      margin-bottom: 15px;
      text-align: center;
    }
    
    .stat-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      padding: 8px 0;
      border-bottom: 1px solid #475569;
    }
    
    .stat-label {
      color: #94a3b8;
    }
    
    .stat-value {
      color: #f1f5f9;
      font-weight: bold;
    }
    
    .connection-status {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 10px 15px;
      border-radius: 6px;
      font-weight: bold;
    }
    
    .connection-status.connected {
      background: #10b981;
      color: white;
    }
    
    .connection-status.disconnected {
      background: #ef4444;
      color: white;
    }
    
    @media (max-width: 768px) {
      .livestream-container {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        order: -1;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üéØ Livestream Betting Platform</h1>
      <p>Giao di·ªán gi·ªëng dv6666.net v·ªõi backend ri√™ng</p>
    </div>
    
    <div class="connection-status" id="connectionStatus">
      üîå ƒêang k·∫øt n·ªëi...
    </div>
    
    <div class="livestream-container">
      <div class="video-section">
        <div class="video-title">
          <span class="live-indicator"></span>
          Tr·∫≠n ƒë·∫•u tr·ª±c ti·∫øp
        </div>
        <div class="video-wrapper">
          <iframe 
            src="https://dv6666.net/" 
            width="100%" 
            height="100%" 
            frameborder="0" 
            allowfullscreen>
          </iframe>
        </div>
      </div>
      
      <div class="sidebar">
        <div class="betting-panel">
          <div class="betting-title">üé≤ ƒê·∫∑t c∆∞·ª£c</div>
          <div class="bet-options">
            <div class="bet-option" data-team="home">
              <div class="bet-team">ƒê·ªôi nh√†</div>
              <div class="bet-odds">1.85</div>
            </div>
            <div class="bet-option" data-team="draw">
              <div class="bet-team">H√≤a</div>
              <div class="bet-odds">3.20</div>
            </div>
            <div class="bet-option" data-team="away">
              <div class="bet-team">ƒê·ªôi kh√°ch</div>
              <div class="bet-odds">2.10</div>
            </div>
          </div>
          
          <div class="bet-amount">
            <input type="number" id="betAmount" placeholder="Nh·∫≠p s·ªë ti·ªÅn c∆∞·ª£c" min="1000" step="1000">
            <div class="quick-amounts">
              <button class="quick-amount" data-amount="10000">10K</button>
              <button class="quick-amount" data-amount="50000">50K</button>
              <button class="quick-amount" data-amount="100000">100K</button>
              <button class="quick-amount" data-amount="500000">500K</button>
            </div>
          </div>
          
          <button class="place-bet-btn" id="placeBetBtn" disabled>
            ƒê·∫∑t c∆∞·ª£c
          </button>
        </div>
        
        <div class="chat-section">
          <div class="chat-title">üí¨ Chat tr·ª±c ti·∫øp</div>
          <div class="chat-messages" id="chatMessages">
            <div class="chat-message system">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi chat tr·ª±c ti·∫øp!</div>
          </div>
          <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Nh·∫≠p tin nh·∫Øn...">
            <button id="sendChatBtn">G·ª≠i</button>
          </div>
        </div>
        
        <div class="stats-section">
          <div class="stats-title">üìä Th·ªëng k√™</div>
          <div class="stat-item">
            <span class="stat-label">S·ªë ng∆∞·ªùi xem:</span>
            <span class="stat-value" id="viewerCount">1,234</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">T·ªïng c∆∞·ª£c:</span>
            <span class="stat-value" id="totalBets">‚Ç´2,500,000</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">S·ªë d∆∞ v√≠:</span>
            <span class="stat-value" id="walletBalance">‚Ç´1,000,000</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // K·∫øt n·ªëi v·ªõi backend c·ªßa b·∫°n
    const API_BASE_URL = 'https://api.devvinny.fun/api/v1';
    const SOCKET_URL = 'https://api.devvinny.fun';
    
    // Socket.io connection
    let socket;
    let isConnected = false;
    
    // DOM elements
    const connectionStatus = document.getElementById('connectionStatus');
    const betOptions = document.querySelectorAll('.bet-option');
    const betAmount = document.getElementById('betAmount');
    const placeBetBtn = document.getElementById('placeBetBtn');
    const quickAmounts = document.querySelectorAll('.quick-amount');
    const chatMessages = document.getElementById('chatMessages');
    const chatInput = document.getElementById('chatInput');
    const sendChatBtn = document.getElementById('sendChatBtn');
    
    let selectedBet = null;
    
    // Initialize connection
    function initConnection() {
      try {
        // Simulate connection to your backend
        setTimeout(() => {
          updateConnectionStatus(true);
          loadUserData();
          startRealTimeUpdates();
        }, 1000);
      } catch (error) {
        console.error('Connection error:', error);
        updateConnectionStatus(false);
      }
    }
    
    function updateConnectionStatus(connected) {
      isConnected = connected;
      if (connected) {
        connectionStatus.textContent = '‚úÖ ƒê√£ k·∫øt n·ªëi';
        connectionStatus.className = 'connection-status connected';
      } else {
        connectionStatus.textContent = '‚ùå M·∫•t k·∫øt n·ªëi';
        connectionStatus.className = 'connection-status disconnected';
      }
    }
    
    function loadUserData() {
      // Load user data from your backend
      fetch(`${API_BASE_URL}/auth/profile`, {
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`
        }
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          document.getElementById('walletBalance').textContent = `‚Ç´${data.user.wallet.balance.toLocaleString()}`;
        }
      })
      .catch(error => {
        console.error('Error loading user data:', error);
      });
    }
    
    function startRealTimeUpdates() {
      // Simulate real-time updates
      setInterval(() => {
        updateViewerCount();
        updateTotalBets();
      }, 5000);
    }
    
    function updateViewerCount() {
      const viewerCount = document.getElementById('viewerCount');
      const currentCount = parseInt(viewerCount.textContent.replace(/,/g, ''));
      const newCount = currentCount + Math.floor(Math.random() * 10) - 5;
      viewerCount.textContent = newCount.toLocaleString();
    }
    
    function updateTotalBets() {
      const totalBets = document.getElementById('totalBets');
      const currentAmount = parseInt(totalBets.textContent.replace(/[‚Ç´,]/g, ''));
      const newAmount = currentAmount + Math.floor(Math.random() * 100000);
      totalBets.textContent = `‚Ç´${newAmount.toLocaleString()}`;
    }
    
    // Betting functionality
    betOptions.forEach(option => {
      option.addEventListener('click', () => {
        betOptions.forEach(opt => opt.classList.remove('selected'));
        option.classList.add('selected');
        selectedBet = option.dataset.team;
        updatePlaceBetButton();
      });
    });
    
    quickAmounts.forEach(btn => {
      btn.addEventListener('click', () => {
        betAmount.value = btn.dataset.amount;
        updatePlaceBetButton();
      });
    });
    
    betAmount.addEventListener('input', updatePlaceBetButton);
    
    function updatePlaceBetButton() {
      const amount = parseInt(betAmount.value) || 0;
      const isValid = selectedBet && amount >= 1000;
      placeBetBtn.disabled = !isValid;
      placeBetBtn.textContent = isValid ? `ƒê·∫∑t c∆∞·ª£c ‚Ç´${amount.toLocaleString()}` : 'ƒê·∫∑t c∆∞·ª£c';
    }
    
    placeBetBtn.addEventListener('click', () => {
      if (!selectedBet || !betAmount.value) return;
      
      const betData = {
        matchId: 'current-match',
        team: selectedBet,
        amount: parseInt(betAmount.value),
        odds: getSelectedOdds()
      };
      
      // Send bet to your backend
      fetch(`${API_BASE_URL}/bets/place`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${localStorage.getItem('token')}`
        },
        body: JSON.stringify(betData)
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          addChatMessage('system', `C∆∞·ª£c th√†nh c√¥ng! S·ªë ti·ªÅn: ‚Ç´${betData.amount.toLocaleString()}`);
          updateWalletBalance();
        } else {
          addChatMessage('system', `L·ªói: ${data.message}`);
        }
      })
      .catch(error => {
        console.error('Bet error:', error);
        addChatMessage('system', 'L·ªói k·∫øt n·ªëi server');
      });
    });
    
    function getSelectedOdds() {
      const selectedOption = document.querySelector('.bet-option.selected');
      return selectedOption ? parseFloat(selectedOption.querySelector('.bet-odds').textContent) : 1;
    }
    
    function updateWalletBalance() {
      // Update wallet balance after bet
      const currentBalance = document.getElementById('walletBalance');
      const currentAmount = parseInt(currentBalance.textContent.replace(/[‚Ç´,]/g, ''));
      const betAmount = parseInt(document.getElementById('betAmount').value);
      const newBalance = currentAmount - betAmount;
      currentBalance.textContent = `‚Ç´${newBalance.toLocaleString()}`;
    }
    
    // Chat functionality
    sendChatBtn.addEventListener('click', sendChatMessage);
    chatInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        sendChatMessage();
      }
    });
    
    function sendChatMessage() {
      const message = chatInput.value.trim();
      if (!message) return;
      
      addChatMessage('user', message);
      chatInput.value = '';
      
      // Send to your backend
      fetch(`${API_BASE_URL}/chat/send`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${localStorage.getItem('token')}`
        },
        body: JSON.stringify({ message })
      })
      .catch(error => {
        console.error('Chat error:', error);
      });
    }
    
    function addChatMessage(type, message) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `chat-message ${type}`;
      messageDiv.textContent = message;
      chatMessages.appendChild(messageDiv);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }
    
    // Initialize
    initConnection();
  </script>
</body>
</html>
